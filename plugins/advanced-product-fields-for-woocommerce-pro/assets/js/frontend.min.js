var WAPF;!function(i){var e=(n.prototype.doDependencies=function(){var t=this,a="disabled";this.$parent.find("[data-wapf-d]").each(function(e,n){var i=jQuery(n),r=t.canShow(i);i[(r?"remove":"add")+"Class"]("wapf-hide"),i.find(".wapf-tf-h").prop(a,!r),i.find(".wapf-input").each(function(e,n){var i=jQuery(n);i.prop("required",!!r&&i.data("is-required")).prop(a,!r)})}),jQuery(document).trigger("wapf/dependencies")},n.prototype.canShow=function(e){var n=e.data("wapf-d");if(!Array.isArray(n))return!0;for(var i=0;i<n.length;i++)if(this.validateRuleGroup(n[i].rules))return!0;return!1},n.prototype.validateRuleGroup=function(e){void 0===e&&(e=[]);for(var n=0;n<e.length;n++)if(!i.Util.isValidRule(this.$parent,e[n].field,e[n].condition,e[n].value||""))return!1;return!0},n);function n(e){var n=this;(this.$parent=e).on("keyup change",'.wapf-input,input[name="variation_id"]',function(){n.doDependencies()}),this.doDependencies()}i.Dependencies=e}(WAPF=WAPF||{});
!function(n){function e(a){a.data("wapf-iid",Math.random().toString(36).substr(2,6)),new n.Dependencies(a),new n.Pricing(a),new n.Quantity(a),new n.ProductImage(a),n.Util.varsViaAjax(a)&&jQuery(document).on("found_variation",function(e,c){jQuery(document).trigger("wapf-ajax-variation",[c]),n.Util.selectedVar=c,n.Pricing.calculateAll(a)}),a.on("click",".wapf-swatch",function(){function e(){c.toggleClass(n),a.prop("checked",!a.prop("checked")).trigger("change")}var c=jQuery(this),a=c.find(".wapf-input"),n="wapf-checked",t="1"==a.data("is-required"),r=c.closest(".wapf-swatch-wrapper").find(".wapf-swatch");a.is(":radio")?t?(r.removeClass(n),a.prop("checked",!0).trigger("change"),c.addClass(n)):(r.not(c).removeClass(n),e()):e()}),a.on("change",".wapf-checkable input",function(){var e=jQuery(this),c=e.closest(".wapf-field-input");e.is(":radio")&&c.find(".wapf-checkable").removeClass("wapf-checked"),jQuery(this).closest(".wapf-checkable").toggleClass("wapf-checked")}),a.on("change","input[type=checkbox]",function(){var e=jQuery(this),c=e.data("maxc"),a=e.data("minc");if(a||c){var n=e.closest(".wapf-field-container").find("input[type=checkbox]"),t=n.filter("input:checked").length,r=n.not(":checked");c&&c<t?e.prop("checked",!1).closest(".wapf-checked").removeClass("wapf-checked"):a&&(t<a?r.prop("required",!0):r.prop("required",!1))}}),a.find(".wapf-checkboxes[data-is-required=1],.wapf-swatch-wrapper[data-is-required=1]").each(function(e,c){function a(){n.filter(":checked").length?n.not(":checked").prop("required",!1):n.first().prop("required",!0)}var n=jQuery(c).find('input[type="checkbox"]');n.on("change",a),a(),jQuery(document).on("wapf/dependencies",a)}),jQuery(document).trigger("wapf/init",[a])}n.Frontend=e}(WAPF),jQuery(function(){"product"==wapf_config.page_type?new WAPF.Frontend(jQuery("body")):jQuery("[data-product-page-preselected-id]").each(function(e,c){new WAPF.Frontend(jQuery(c))})});
!function(s){var a=(v.fxPriceHints=function(a,t){var e=s.Filter.apply("wapf/fx/hint",v.getPrice(a,jQuery(t))),i=s.Util.formatMoney(e,wapf_config.display_options),r=e<0?"":"+";t.is("option")&&t.html(t.data("wapf-label")+" "+t.data("fx-hint").replace(/\.{3}/,r+i)),t.closest(".has-pricing").find(".wapf-addon-price").html(r+i)},v.calculateAll=function(a){var t=wapf_config.display_options,e=s.Util.currentProductPrice(a)*s.Util.selectedQuantity(a),i=this.calculateOptionTotal(a),r=e+i;r<0&&(r=0);var n=".wapf-",l=s.Util.formatMoney;a.find(n+"product-total").html(l(e,t)),a.find(n+"options-total").html(l(i,t)),a.find(n+"grand-total").html(l(r,t)),a.find(n+"product-totals").show(),jQuery(document).trigger("wapf/pricing",[e,i,e+i,a])},v.calculateOptionTotal=function(r){var n=0;return r.find("[data-wapf-price]").each(function(a,t){var e=jQuery(t),i=s.Util.getFieldType(e);"fx"===e.data("wapf-pricetype")&&v.fxPriceHints(r,e),!0!==e.prop("disabled")&&(-1<["checkbox","radio"].indexOf(i)&&!e.is(":checked")||("option"!=i||e.is(":selected")&&!0!==e.closest("select").prop("disabled"))&&e.val()&&(n+=v.getPrice(r,e)))}),n},v.getPrice=function(a,t){var e=s.Util.currentProductPrice(a),i=t.data("wapf-pricetype"),r=t.data("wapf-price"),n=t.data("wapf-label")||t.val(),l=this.toAdd(i,e,"fx"===i?r:parseFloat(r||"0"),a,t,n);return"fx"===i&&-1===r.indexOf("[price]")&&(l*=t.data("wapf-tax")),l||0},v.toAdd=function(a,o,t,f,p,d){var u=s.Util.selectedQuantity(f);switch(a){case"percent":return o*(t/100)*u;case"p":return o*(t/100);case"qt":return u*t;case"nr":return d*t;case"nrq":return d*t*u;case"char":return d.length*t;case"charq":return d.length*t*u;case"fx":var e=s.Util.replaceFx(t,u,o,d,p);return e=e.replace(/\[var_.+?]/g,function(a){var t=f.data("wapf-iid");if(v.variables[t]){var e=s.Util.first(v.variables[t],"name",a.replace(/\[var_|]/g,""));if(e){for(var i=e.default,r=p.data("clone")||0,n=0;n<e.rules.length;n++){var l=e.rules[n],c=s.Util.cloneField(l.field,f,r);if(s.Util.isValidRule(f,c,l.condition,l.value||"")){i=l.variable;break}}return s.Util.parseFx(s.Util.replaceFx(s.Util.cloneFx(i,f,r),u,o,d,p))}}return"0"}),s.Util.parseFx(e);default:return t}},v.variables=[],v);function v(a){if(a.find("[data-wapf-price]").length){var i=a.data("wapf-iid");v.variables[i]=[],a.find(".wapf-field-group").each(function(a,t){var e=jQuery(t).data("variables");e&&(v.variables[i]=v.variables[i].concat(e))}),a.on("keyup change",'.wapf-input,input[name="variation_id"]',function(){v.calculateAll(a)}),a.find("[data-qty-based]").length||a.on("keyup change",":input.qty",function(){v.calculateAll(a)}),v.calculateAll(a)}}s.Pricing=a}(WAPF);
!function(g){var t=(a.prototype.doImageLogic=function(t,a){void 0===t&&(t="rules");var i=this.validRule(t,a);if(i)this.showImage(i.image);else{var e=g.Util.selectedVariation(this.$parent);this.showImage(e?e.image_id:this.defaultImageId)}},a.prototype.validRule=function(t,a){for(var i=0;i<this.rules.length;i++){for(var e=this.rules[i],r=!0,s=0;s<e.values.length;s++){var n=e.values[s];if("*"!=n.value){var o=this.$parent.find("[data-field-id="+n.field+"]"),d=g.Util.getFieldValue(o,!0);if(!(Array.isArray(d)?-1<d.indexOf(n.value):n.value==d||1==d)||"last"===t&&n.field!=a.data("field-id")){r=!1;break}}}if(r)return e}return null},a.prototype.createImageObj=function(t){var a={image_id:t.attr("data-wapf-att-id")},i=t.find("img"),e=i.data("o_src")?"data-o_":"";for(var r in this.mappingAttrs.forEach(function(t){a[t]=i.attr(e+t)}),a.thumb_src=t.data("thumb"),this.mappings)this.mappings.hasOwnProperty(r)&&(a[this.mappings[r]]=i.attr(e+r));return wapf_config.slider_support||(a.srcset=" "),a},a.prototype.showImage=function(r){var s=this;setTimeout(function(){var t=s.images[parseInt(r)],a=s.$parent.find("[data-wapf-att-id="+r+"]");if(a.length&&wapf_config.slider_support){var i=s.$parent.find(".images").data("flexslider");if(i){var e=i.vars?i.vars.animationSpeed:250;return s.isFirstLoad&&(i.vars.animationSpeed=0),s.$parent.find(".flex-control-nav li").eq(jQuery("[data-wapf-att-id]").index(a)).find("img").trigger("click"),i.vars.animationSpeed=e,s.isFirstLoad=!1,s.reset()}}s.setCustomImage(t)},5)},a.prototype.setCustomImage=function(a){var i=this;for(var t in this.$postImg=this.$parent.find(".images .wp-post-image"),this.mappingAttrs.forEach(function(t){a[t]&&i.$postImg.attr(t,a[t])},this),this.mappings)this.mappings.hasOwnProperty(t)&&this.$postImg.attr(t,a[this.mappings[t]]);var e=this.$parent.find(".flex-control-nav li:eq(0) img");e.attr("src",a.thumb_src),this.$postImg.closest("a").attr("href",a.full_src),this.$postImg.closest("div").attr("data-wapf-att-id",a.image_id),e.trigger("click"),this.reset()},a.prototype.reset=function(){var t=this;setTimeout(function(){jQuery(window).trigger("resize"),t.$parent.find(".images").trigger("woocommerce_gallery_init_zoom")},15)},a);function a(t){var e=this;if(this.rules=[],this.images={},this.mappingAttrs=["src","height","width","title","srcset","alt","sizes"],this.isFirstLoad=!0,this.mappings={"data-src":"full_src","data-caption":"caption","data-large_image":"full_src","data-large_image_width":"full_src_w","data-large_image_height":"full_src_h"},this.$parent=t,this.$postImg=t.find(".images .wp-post-image"),this.$postImg.length){var a=t.find("[data-wapf-gi]");if(a.length){jQuery(document).trigger("wapf:delete_var"),jQuery(document).on("wapf-ajax-variation",function(t,a){e.images[a.variation_id]=a}),this.defaultImageId=this.$postImg.closest("div").data("wapf-att-id"),this.$parent.find("[data-wapf-att-id]").each(function(t,a){var i=jQuery(a);e.images[i.data("wapf-att-id")]=e.createImageObj(i)});var i=t.find('input[name="variation_id"]');if(i.length){var r=this.$parent.find("form.cart").data("product_variations");r&&r.forEach(function(t){t.image.image_id=t.image_id,e.images[t.image_id]=t.image})}a.each(function(t,a){var i=jQuery(a).data("wapf-gi");e.rules=e.rules.concat(i.rules),i.images.forEach(function(t){e.images[t.image_id]=t})}),this.rules.reverse(),i.on("change",function(){e.doImageLogic("rules",i)}),t.find(".wapf-input").on("change",function(t){var a=jQuery(t.currentTarget);e.doImageLogic(a.closest("[data-wapf-st]").data("wapf-st"),a)}).first().trigger("change")}}}g.ProductImage=t}(WAPF);
!function(h){var t=(a.prototype.doQtyLogic=function(t){var p=this,s=h.Util.selectedQuantity(this.$parent);t.each(function(t,a){var e=jQuery(a),i=e.attr("for"),n=void 0===p.c[i]?0:p.c[i].length,r=s-(n+1),f=e.hasClass("wapf-section");if(0!=r)if(0<r)for(var c=0;c<r;c++){var d=n+c+2,o=(e.data("clone-txt")||"").replace("{n}",d),l=p.changeAttributes(e.clone(!0),d,o,f);l.insertAfter(p.c[i]&&p.c[i].length?p.c[i][p.c[i].length-1]:e),f&&o&&l.prepend('<div class="wapf-clone-title"><label>'+o+"</label></div>"),p.c[i]?p.c[i].push(l):p.c[i]=[l]}else p.c[i].splice(r,Math.abs(r)).forEach(function(t){t.remove()})}),h.Pricing.calculateAll(this.$parent)},a.prototype.changeAttributes=function(o,l,t,a){function e(t){var a=t.data("wapf-d");a&&((a=JSON.parse(JSON.stringify(a))).forEach(function(t){t.rules.forEach(function(t){var a=p.$parent.find('[for="'+t.field+'"]').first();a.length&&(""==a.data("qty-based")||a.closest(".wapf-section[data-qty-based]").length)&&(t.field=t.field+"_clone_"+l)})}),t.attr("data-wapf-d",JSON.stringify(a)).data("wapf-d",a))}var p=this,i=o.find(".wapf-input,.wapf-tf-h").data("clone",l),n=o.find("[data-wapf-d]");e(o),n.each(function(t,a){e(jQuery(a))}),i.each(function(t,a){var e=jQuery(a),i=e.data(e.hasClass("wapf-tf-h")?"fid":"field-id"),n=i+"_clone_"+l;function r(t){if("fx"==t.data("wapf-pricetype")){var a=h.Util.cloneFx(t.data("wapf-price"),p.$parent,l);t.attr("data-wapf-price",a).data("wapf-price",a)}}["name","id","data-field-id","data-fid"].forEach(function(t){e.attr(t)&&e.attr(t,e.attr(t).replace(i,n))}),e.data("field-id",n),r(e),e.find("option").data("clone",l).each(function(t,a){r(jQuery(a))});var f=e.attr("id"),c=o.find('label[for="'+f+'"]');if(c.length){var d=f+"_"+l;c.attr("for",d),e.attr("id",d)}}),o.removeAttr("data-qty-based data-clone-txt");var r=o.find(".wapf-field-label label > span:first-child");return a||r.html(t),o},a);function a(t){var a=this;this.c=[];var e,i=(this.$parent=t).find("[data-qty-based]");i.length&&(t.on("keyup change",":input.qty",function(){clearTimeout(e),e=setTimeout(function(){a.doQtyLogic(i)},320)}),this.doQtyLogic(i))}h.Quantity=t}(WAPF);
!function(f){var t=(i.add=function(f,t){this.f[f]||(this.f[f]=[]),this.f[f].push(t)},i.apply=function(f,t,i){return this.f[f]&&this.f[f].forEach(function(f){t=f(t,i)}),t},i.f=[],i);function i(){}f.Filter=t}(WAPF);
!function(f){var e=(o.first=function(e,r,t){for(var a=0;a<e.length;a++)if(e[a][r]===t)return e[a];return null},o.replaceFx=function(e,r,t,a,n){return(e=e.replace(/\[qty]/g,r).replace(/\[price]/g,t).replace(/\[x]/g,a)).replace(/\[field\..+?]/g,function(e){return o.getFieldValue(jQuery("[data-field-id="+e.replace("[field.","").replace("]","")+"]"))})},o.parseFx=function(l){var s=this;return f.Filter.apply("wapf/fx/functions",["min","max","len"]).forEach(function(e){var r=e+"(",t=l.indexOf(r);if(-1<t){var a=t+r.length,n=function(e,r){var t=/\(|\)/g;t.lastIndex=r+1;var a=r;if(")"===e[r])return r;for(var n=1;r=t.exec(e);)if(!(n+="("===e[r.index]?1:-1))return r.index;return a}(l,a),i=l.substring(a,n),u=i.split(";"),c="";switch(e){case"len":c=(""+i).length;break;case"min":c=Math.min.apply(null,u.map(function(e){return s.parseFx(e)}));break;case"max":c=Math.max.apply(null,u.map(function(e){return s.parseFx(e)}))}l=""+s.parseFx(l.substr(0,t)+f.Filter.apply("wapf/fx/solve",c,{func:e,args:u})+l.substr(n+1))}}),this.evalFx(l)},o.evalFx=function(e){function f(e){return parseFloat(e)}function o(e,r){return-1<e.indexOf(r)}var p=function(e){var r=!1,t=!1,a=0;if(e=e.replace(/[^\d.+\-*\/()]/gi,""),o(e,"(")&&o(e,")")){var n=/\(([\d.+\-*\/]+)\)/;if(1<(c=e.match(n)||[]).length)return p(e.replace(n,p(c[1])))}if(e=e.replace("(","").replace(")",""),o(e,"/")||o(e,"*")){r=!0;for(var i=["*","/"];i.length;)for(var u=i.pop();u&&o(e,u);){var c;if(n=new RegExp("([\\d.]+)\\"+u+"(\\-?[\\d.]+)"),!(2<(c=e.match(n)||[]).length))return 0;"+"==u&&(a=f(c[1])+f(c[2])),"-"==u&&(a=f(c[1])-f(c[2])),"*"==u&&(a=f(c[1])*f(c[2])),"/"==u&&(a=f(c[1])/f(c[2])),e=(e=e.replace(n,a)).replace("++","+").replace("--","+").replace("-+","-").replace("+-","-")}}if(o(e,"+")||o(e,"-")){t=!0;var l=(e=e.replace("--","+")).match(/([\d\.]+|[\+\-])/g)||[];if(0<l.length){u="+";for(var s=a=0;s<l.length;s++)"+"==l[s]||"-"==l[s]?u=l[s]:a="+"==u?a+f(l[s]):a-f(l[s])}}return r||t||(a=f(e)),a};return p(e)},o.cloneField=function(e,r,t){if(!t)return e;var a=r.find('[for="'+e+'"]').first();return a.length&&""==a.data("qty-based")?e+"_clone_"+t:e},o.cloneFx=function(e,a,n){var i=this;return e.replace(/\[(field\.)(.+?)]/g,function(e,r,t){return"["+r+i.cloneField(t,a,n)+"]"})},o.getFieldType=function(e){if(e.is("input"))return e.attr("type");for(var r=["select","textarea","option"],t=0;t<r.length;t++)if(e.is(r[t]))return r[t];return""},o.getFieldValue=function(e,a){void 0===a&&(a=!1);var r=this.getFieldType(e),t=e.attr("name"),n=jQuery('input[name="'+t+'"]:checked');switch(r){case"select":var i=e.val();return a?i||"":i?e.find("option:selected").data("wapf-label"):"";case"radio":return i=n.val(),a?i||"":n.length?n.data("wapf-label"):"";case"checkbox":if("[]"!=t.substring(t.length-2,t.length))return e.is(":checked");var u=[];return n.each(function(e,r){var t=jQuery(r);u.push(a?t.val():t.data("wapf-label"))}),u;default:return e.val()}},o.selectedQuantity=function(e){var r=parseInt(e.find("[name=quantity]").val());return isNaN(r)?0:r},o.currentProductType=function(e){return e.find(".wapf-product-totals").data("product-type")},o.currentProductPrice=function(e){var r=this.selectedVariation(e),t=0;return t="variable"==this.currentProductType(e)&&r?r.display_price:e.find(".wapf-product-totals").data("product-price"),f.Filter.apply("wapf/pricing/base",t,{parent:e})},o.currentVariationId=function(e){var r=e.find('input[name="variation_id"]').val();return r?parseInt(r):0},o.varsViaAjax=function(e){return 0==e.find("[data-product_variations]").data("product_variations")},o.selectedVariation=function(e){var r=e.find("[data-product_variations]").data("product_variations");if(!r)return this.selectedVar;var t=this.currentVariationId(e);return t?o.first(r,"variation_id",t):null},o.unformat=function(e,r){if(void 0===r&&(r=","),"number"==typeof e)return e;var t=new RegExp("[^0-9-"+r+"]","g"),a=parseFloat(e.replace(/\((.*)\)/,"-$1").replace(t,"").replace(r,"."));return isNaN(a)?0:a},o.formatNumber=function(e,r,t,a){e=this.unformat(e,a);var n,i,u=(n=Math.abs(e),i=r,Number(Math.round(n+"e"+i)+"e-"+i).toFixed(i)),c=e<0?"-":"",l=parseInt(u,10)+"",s=3<l.length?l.length%3:0;return c+(s?l.substr(0,s)+t:"")+l.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+t)+(r?a+u.split(".")[1]:"")},o.formatMoney=function(e,r){return e<0&&r.format.replace("%2$s","-%2$s"),r.format.replace("%1$s",r.symbol).replace("%2$s",o.formatNumber(e,r.decimals||0,r.thousand,r.decimal))},o.isValidRule=function(e,r,t,a){var n=null;if("qty"==r)n=o.selectedQuantity(e);else{var i=e.find('[data-field-id="'+r+'"]').first();if(!i.length)return!1;if(-1<t.indexOf("product_var")||-1<t.indexOf("patts")){if(-1===o.currentProductType(e).indexOf("variable"))return!0;var u=o.selectedVariation(e);if(null==u)return!1;function c(){for(var e=0;e<l.length;e++){var r=l[e].split("|");if(u.attributes["attribute_pa_"+r[0]]&&("*"==r[1]||u.attributes["attribute_pa_"+r[0]]===r[1]))return!0}return!1}var l=a.split(","),s=""+u.variation_id;switch(t){case"product_var":return-1<l.indexOf(s);case"!product_var":return-1==l.indexOf(s);case"patts":return!0===c();case"!patts":return!1===c()}}if(i.closest(".wapf-field-container").hasClass("wapf-hide"))return!1;n=o.getFieldValue(i,!0)}switch("number"==typeof n&&(n=n.toString()),t){case"check":return 1==n;case"!check":return 0==n;case"==":return Array.isArray(n)?-1<n.indexOf(a):n==a;case"!=":return Array.isArray(n)?-1==n.indexOf(a):n!=a;case"empty":return n==[]||""==n;case"!empty":return n!=[]&&""!=n;case"==contains":return-1<n.indexOf(a);case"!=contains":return-1===n.indexOf(a);case"lt":return parseFloat(n)<parseFloat(a);case"gt":return parseFloat(n)>parseFloat(a)}return!1},o.selectedVar=null,o);function o(){}f.Util=e}(WAPF);